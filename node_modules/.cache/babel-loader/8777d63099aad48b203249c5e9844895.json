{"ast":null,"code":"var _jsxFileName = \"/Users/liam/react-moonland/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport background from \"./background.png\";\nimport axios from \"axios\";\nimport { Connection, clusterApiUrl, ConnectionConfig } from \"@solana/web3.js\";\nimport { getParsedNftAccountsByOwner, isValidSolanaAddress, createConnectionConfig } from \"@nfteyez/sol-rayz\";\nimport './App.css';\nvar publicKey;\nvar allNftData;\n\nconst express = require('express');\n\nconst request = require('request');\n\nApp.use((req, res, next) => {\n  res.header('Access-Control-Allow-Origin', '*');\n  next();\n}); // headers.append(\"Access-Control-Allow-Origin\",\"*\");\n\nconst unityContext = new UnityContext({\n  loaderUrl: \"./Build/public.loader.js\",\n  dataUrl: \"./Build/public.data\",\n  frameworkUrl: \"./Build/public.framework.js\",\n  codeUrl: \"./Build/public.wasm\"\n});\n\nfunction App() {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [progression, setProgression] = useState(0);\n  const [provider, setProvider] = useState(\"\");\n\n  const getProvider = async () => {\n    if (\"solana\" in window) {\n      await window.solana.connect();\n      const provider = window.solana;\n\n      if (provider.isPhantom) {\n        return provider;\n      }\n    } else {\n      window.alert('Install https://www.phantom.app/');\n    }\n  };\n\n  async function letsgo() {\n    createConnection();\n    getProvider();\n\n    async function data() {\n      let res = await getAllNftData();\n      getNftTokenData();\n    }\n\n    data();\n  } //create a connection\n\n\n  const createConnection = () => {\n    // return new Connection(clusterApiUrl(\"devnet\"));\n    return new Connection(\"https://www.whateverorigin.org/get?url=\" + clusterApiUrl(\"mainnet-beta\"));\n  }; //get NFT\n\n\n  const getAllNftData = async () => {\n    try {\n      const connect = createConnectionConfig(\"https://www.whateverorigin.org/get?url=\" + clusterApiUrl(\"mainnet-beta\")); // const connect =  createConnectionConfig(clusterApiUrl(\"devnet\"));\n\n      const provider = getProvider();\n      let ownerToken = publicKey;\n      const result = isValidSolanaAddress(ownerToken);\n      const nfts = await getParsedNftAccountsByOwner({\n        publicAddress: ownerToken,\n        connection: connect,\n        serialization: true\n      });\n      return nfts;\n    } catch (error) {\n      console.log(\"fail to make connection2\");\n      console.log(error);\n    }\n  }; //Function to get all nft data\n\n\n  const getNftTokenData = async () => {\n    try {\n      var root = {\n        data: {\n          arr: []\n        }\n      };\n      let nftData = await getAllNftData();\n      var data = Object.keys(nftData).map(key => nftData[key]);\n      let n = data.length;\n\n      for (let i = 0; i < n; i++) {\n        let val = await axios.get(\"https://www.whateverorigin.org/get?url=\" + data[i].data.uri, function (req, res) {\n          var res = {\n            \"statusCode\": 200,\n            \"headers\": {\n              \"Access-Control-Allow-Origin\": \"*\"\n            },\n            \"body\": JSON.stringify(val.data),\n            \"isBase64Encoded\": false\n          };\n        });\n        console.log(\"fail to make connection3\");\n        root.data.arr.push(val);\n      }\n\n      allNftData = root.data; // console.log(JSON.stringify(allNftData));\n\n      unityContext.send(\"SolanaWalletConnect\", \"SetNFTData\", JSON.stringify(allNftData)); // console.log(allNftData);\n\n      return root.data.arr;\n    } catch (error) {\n      console.log(error);\n      console.log(\"fail to make connection4\");\n    }\n  };\n\n  const NFT = async props => {\n    const [nftData, setNftData] = useState([]);\n    const [loading, setLoading] = useState(false);\n    createConnection();\n    getProvider();\n    useEffect(() => {\n      async function data() {\n        let res = await getAllNftData();\n        setNftData(res);\n        setLoading(true);\n        getNftTokenData();\n      }\n\n      data();\n    }, []);\n  };\n\n  useEffect(() => {\n    setProvider(publicKey);\n  }, []);\n  useEffect(() => {\n    setProvider(publicKey);\n  }, []);\n  useEffect(function () {\n    unityContext.on(\"NFT\", function () {\n      if (window.solana.isConnected) {\n        // console.log(JSON.stringify(allNftData));\n        unityContext.send(\"SolanaWalletConnect\", \"SetNFTData\", JSON.stringify(allNftData));\n      } else {\n        getProvider().then(provider => {\n          // console.log('key', provider.publicKey.toString());\n          publicKey = provider.publicKey.toString();\n          setProvider(provider.publicKey.toString());\n        }).then(() => {\n          letsgo();\n        }).catch(function (error) {\n          console.log(error);\n          console.log(\"fail to make connection5\");\n        });\n      }\n    });\n  }, []);\n  useEffect(function () {\n    unityContext.on(\"Logout\", function () {\n      if (window.solana.isConnected) {\n        window.solana.disconnect();\n        window.solana.on('disconnect', () => console.log(\"disconnected!\"));\n        unityContext.send(\"SolanaWalletConnect\", \"Disconnected\");\n      }\n    });\n  }, []);\n  useEffect(function () {\n    unityContext.on(\"progress\", function (progression) {\n      console.log(\"progress\");\n      setProgression(parseFloat(progression).toFixed(2));\n    });\n  }, []);\n  useEffect(function () {\n    unityContext.on(\"loaded\", function () {\n      console.log(\"loaded\");\n      setIsLoaded(true);\n    });\n  }, []);\n  var some = \"0\";\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      visibility: isLoaded ? \"hidden\" : \"visible\",\n      backgroundImage: `url(${background})`,\n      backgroundSize: \"cover\",\n      height: \"100%\",\n      width: \"100%\",\n      color: \"#f5f5f5\",\n      position: 'absolute',\n      left: 0,\n      top: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      visibility: isLoaded ? \"hidden\" : \"visible\",\n      height: \"30px\",\n      width: \"100%\",\n      position: \"absolute\",\n      textAlign: 'center',\n      bottom: \"100px\",\n      fontSize: \"2em\",\n      fontColor: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 4\n    }\n  }, \"Loading... \", progression * 100, \"%\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Unity, {\n    style: {\n      visibility: isLoaded ? \"visible\" : \"hidden\",\n      height: \"100%\",\n      width: \"100%\",\n      background: \"grey\",\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      overflow: \"hidden\"\n    },\n    unityContext: unityContext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 4\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/liam/react-moonland/src/App.js"],"names":["React","useState","useEffect","Unity","UnityContext","background","axios","Connection","clusterApiUrl","ConnectionConfig","getParsedNftAccountsByOwner","isValidSolanaAddress","createConnectionConfig","publicKey","allNftData","express","require","request","App","use","req","res","next","header","unityContext","loaderUrl","dataUrl","frameworkUrl","codeUrl","isLoaded","setIsLoaded","progression","setProgression","provider","setProvider","getProvider","window","solana","connect","isPhantom","alert","letsgo","createConnection","data","getAllNftData","getNftTokenData","ownerToken","result","nfts","publicAddress","connection","serialization","error","console","log","root","arr","nftData","Object","keys","map","key","n","length","i","val","get","uri","JSON","stringify","push","send","NFT","props","setNftData","loading","setLoading","on","isConnected","then","toString","catch","disconnect","parseFloat","toFixed","some","visibility","backgroundImage","backgroundSize","height","width","color","position","left","top","textAlign","bottom","fontSize","fontColor","overflow"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAA0C,OAA1C;AACA,OAAOC,KAAP,IAAgBC,YAAhB,QAAoC,mBAApC;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,aAArB,EAAoCC,gBAApC,QAA2D,iBAA3D;AACA,SAASC,2BAAT,EAAsCC,oBAAtC,EAA4DC,sBAA5D,QAAyF,mBAAzF;AACA,OAAO,WAAP;AAEA,IAAIC,SAAJ;AACA,IAAIC,UAAJ;;AAEA,MAAMC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AAEAE,GAAG,CAACC,GAAJ,CAAQ,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1BD,EAAAA,GAAG,CAACE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAD,EAAAA,IAAI;AACL,CAHD,E,CAKA;;AAEA,MAAME,YAAY,GAAG,IAAIpB,YAAJ,CAAiB;AACpCqB,EAAAA,SAAS,EAAE,0BADyB;AAEpCC,EAAAA,OAAO,EAAE,qBAF2B;AAGpCC,EAAAA,YAAY,EAAE,6BAHsB;AAIpCC,EAAAA,OAAO,EAAE;AAJ2B,CAAjB,CAArB;;AAOA,SAASV,GAAT,GAAe;AACb,QAAM,CAACW,QAAD,EAAWC,WAAX,IAA0B7B,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAAC8B,WAAD,EAAcC,cAAd,IAAgC/B,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACgC,QAAD,EAAWC,WAAX,IAA0BjC,QAAQ,CAAC,EAAD,CAAxC;;AAGA,QAAMkC,WAAW,GAAG,YAAY;AAC9B,QAAI,YAAYC,MAAhB,EAAwB;AACtB,YAAMA,MAAM,CAACC,MAAP,CAAcC,OAAd,EAAN;AACA,YAAML,QAAQ,GAAGG,MAAM,CAACC,MAAxB;;AACA,UAAIJ,QAAQ,CAACM,SAAb,EAAwB;AACtB,eAAON,QAAP;AACD;AACF,KAND,MAMO;AACLG,MAAAA,MAAM,CAACI,KAAP,CAAa,kCAAb;AACD;AACF,GAVD;;AAYA,iBAAeC,MAAf,GAAwB;AACrBC,IAAAA,gBAAgB;AAChBP,IAAAA,WAAW;;AACT,mBAAeQ,IAAf,GAAsB;AACpB,UAAItB,GAAG,GAAG,MAAMuB,aAAa,EAA7B;AACAC,MAAAA,eAAe;AAChB;;AACDF,IAAAA,IAAI;AACR,GA1BY,CA4Bb;;;AACF,QAAMD,gBAAgB,GAAG,MAAM;AAC7B;AACA,WAAO,IAAInC,UAAJ,CAAe,4CAA4CC,aAAa,CAAC,cAAD,CAAxE,CAAP;AACD,GAHD,CA7Be,CAkCb;;;AACA,QAAMoC,aAAa,GAAG,YAAY;AAChC,QAAI;AACF,YAAMN,OAAO,GAAI1B,sBAAsB,CAAC,4CAA4CJ,aAAa,CAAC,cAAD,CAA1D,CAAvC,CADE,CAEF;;AACA,YAAMyB,QAAQ,GAAGE,WAAW,EAA5B;AACA,UAAIW,UAAU,GAAGjC,SAAjB;AACA,YAAMkC,MAAM,GAAGpC,oBAAoB,CAACmC,UAAD,CAAnC;AACA,YAAME,IAAI,GAAG,MAAMtC,2BAA2B,CAAC;AAC7CuC,QAAAA,aAAa,EAAEH,UAD8B;AAE7CI,QAAAA,UAAU,EAAEZ,OAFiC;AAG7Ca,QAAAA,aAAa,EAAE;AAH8B,OAAD,CAA9C;AAKA,aAAOH,IAAP;AACH,KAZC,CAYA,OAAOI,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAjBC,CAnCa,CAsDf;;;AACA,QAAMP,eAAe,GAAG,YAAY;AAClC,QAAI;AACF,UAAIU,IAAI,GAAG;AACTZ,QAAAA,IAAI,EAAC;AACHa,UAAAA,GAAG,EAAC;AADD;AADI,OAAX;AAKA,UAAIC,OAAO,GAAG,MAAMb,aAAa,EAAjC;AACA,UAAID,IAAI,GAAGe,MAAM,CAACC,IAAP,CAAYF,OAAZ,EAAqBG,GAArB,CAA0BC,GAAD,IAASJ,OAAO,CAACI,GAAD,CAAzC,CAAX;AACA,UAAIC,CAAC,GAAGnB,IAAI,CAACoB,MAAb;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,CAApB,EAAuBE,CAAC,EAAxB,EAA4B;AAC1B,YAAIC,GAAG,GAAG,MAAM3D,KAAK,CAAC4D,GAAN,CAAU,4CAA4CvB,IAAI,CAACqB,CAAD,CAAJ,CAAQrB,IAAR,CAAawB,GAAnE,EAAwE,UAAU/C,GAAV,EAAeC,GAAf,EAAoB;AAC1G,cAAIA,GAAG,GAAG;AACR,0BAAc,GADN;AAER,uBAAW;AACP,6CAA8B;AADvB,aAFH;AAKR,oBAAS+C,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACtB,IAAnB,CALD;AAMR,+BAAmB;AANX,WAAV;AAQD,SATe,CAAhB;AAWAU,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAC,QAAAA,IAAI,CAACZ,IAAL,CAAUa,GAAV,CAAcc,IAAd,CAAmBL,GAAnB;AACD;;AAEDnD,MAAAA,UAAU,GAAGyC,IAAI,CAACZ,IAAlB,CAzBE,CA0BF;;AACAnB,MAAAA,YAAY,CAAC+C,IAAb,CAAkB,qBAAlB,EAAyC,YAAzC,EAAuDH,IAAI,CAACC,SAAL,CAAevD,UAAf,CAAvD,EA3BE,CA4BF;;AACA,aAAOyC,IAAI,CAACZ,IAAL,CAAUa,GAAjB;AACD,KA9BD,CA8BE,OAAOJ,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACD;AACF,GAnCD;;AAqCA,QAAMkB,GAAG,GAAG,MAAOC,KAAP,IAAiB;AAC3B,UAAM,CAAChB,OAAD,EAAUiB,UAAV,IAAwBzE,QAAQ,CAAC,EAAD,CAAtC;AACA,UAAM,CAAC0E,OAAD,EAAUC,UAAV,IAAwB3E,QAAQ,CAAC,KAAD,CAAtC;AACAyC,IAAAA,gBAAgB;AAChBP,IAAAA,WAAW;AACbjC,IAAAA,SAAS,CAAC,MAAM;AACZ,qBAAeyC,IAAf,GAAsB;AACpB,YAAItB,GAAG,GAAG,MAAMuB,aAAa,EAA7B;AACA8B,QAAAA,UAAU,CAACrD,GAAD,CAAV;AACAuD,QAAAA,UAAU,CAAC,IAAD,CAAV;AACA/B,QAAAA,eAAe;AAChB;;AACDF,MAAAA,IAAI;AACL,KARM,EAQJ,EARI,CAAT;AASC,GAdD;;AAgBEzC,EAAAA,SAAS,CAAE,MAAM;AAChBgC,IAAAA,WAAW,CAACrB,SAAD,CAAX;AACA,GAFQ,EAEN,EAFM,CAAT;AAGAX,EAAAA,SAAS,CAAE,MAAM;AACfgC,IAAAA,WAAW,CAACrB,SAAD,CAAX;AACA,GAFO,EAEL,EAFK,CAAT;AAICX,EAAAA,SAAS,CAAC,YAAY;AACrBsB,IAAAA,YAAY,CAACqD,EAAb,CAAgB,KAAhB,EAAuB,YAAY;AACjC,UAAIzC,MAAM,CAACC,MAAP,CAAcyC,WAAlB,EAA+B;AAC7B;AAEAtD,QAAAA,YAAY,CAAC+C,IAAb,CAAkB,qBAAlB,EAAyC,YAAzC,EAAuDH,IAAI,CAACC,SAAL,CAAevD,UAAf,CAAvD;AACD,OAJD,MAIO;AACLqB,QAAAA,WAAW,GAAG4C,IAAd,CAAmB9C,QAAQ,IAAI;AAC7B;AACApB,UAAAA,SAAS,GAAGoB,QAAQ,CAACpB,SAAT,CAAmBmE,QAAnB,EAAZ;AACA9C,UAAAA,WAAW,CAACD,QAAQ,CAACpB,SAAT,CAAmBmE,QAAnB,EAAD,CAAX;AACD,SAJD,EAIGD,IAJH,CAIQ,MAAM;AACZtC,UAAAA,MAAM;AACP,SAND,EAMGwC,KANH,CAMS,UAAS7B,KAAT,EAAe;AACtBC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACD,SATD;AAUD;AACF,KAjBD;AAkBD,GAnBS,EAmBP,EAnBO,CAAT;AAqBDpD,EAAAA,SAAS,CAAC,YAAY;AACpBsB,IAAAA,YAAY,CAACqD,EAAb,CAAgB,QAAhB,EAA0B,YAAY;AACpC,UAAIzC,MAAM,CAACC,MAAP,CAAcyC,WAAlB,EAA+B;AAC7B1C,QAAAA,MAAM,CAACC,MAAP,CAAc6C,UAAd;AACA9C,QAAAA,MAAM,CAACC,MAAP,CAAcwC,EAAd,CAAiB,YAAjB,EAA+B,MAAMxB,OAAO,CAACC,GAAR,CAAY,eAAZ,CAArC;AACA9B,QAAAA,YAAY,CAAC+C,IAAb,CAAkB,qBAAlB,EAAyC,cAAzC;AACD;AACF,KAND;AAOD,GARQ,EAQN,EARM,CAAT;AAUArE,EAAAA,SAAS,CAAC,YAAY;AACpBsB,IAAAA,YAAY,CAACqD,EAAb,CAAgB,UAAhB,EAA4B,UAAU9C,WAAV,EAAuB;AACjDsB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAtB,MAAAA,cAAc,CAACmD,UAAU,CAACpD,WAAD,CAAV,CAAwBqD,OAAxB,CAAgC,CAAhC,CAAD,CAAd;AACD,KAHD;AAID,GALQ,EAKN,EALM,CAAT;AAQAlF,EAAAA,SAAS,CAAC,YAAY;AACpBsB,IAAAA,YAAY,CAACqD,EAAb,CAAgB,QAAhB,EAA0B,YAAY;AACpCxB,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAxB,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD,KAHD;AAID,GALQ,EAKN,EALM,CAAT;AAOF,MAAIuD,IAAI,GAAG,GAAX;AACE,sBAEA;AAAK,IAAA,KAAK,EAAI;AACZC,MAAAA,UAAU,EAAEzD,QAAQ,GAAG,QAAH,GAAc,SADtB;AAEZ0D,MAAAA,eAAe,EAAG,OAAMlF,UAAW,GAFvB;AAGVmF,MAAAA,cAAc,EAAE,OAHN;AAIVC,MAAAA,MAAM,EAAE,MAJE;AAKVC,MAAAA,KAAK,EAAE,MALG;AAMVC,MAAAA,KAAK,EAAE,SANG;AAOZC,MAAAA,QAAQ,EAAE,UAPE;AAQZC,MAAAA,IAAI,EAAE,CARM;AASZC,MAAAA,GAAG,EAAE;AATO,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAYC;AACC,IAAA,KAAK,EAAE;AAAER,MAAAA,UAAU,EAAEzD,QAAQ,GAAG,QAAH,GAAc,SAApC;AACP4D,MAAAA,MAAM,EAAE,MADD;AAEPC,MAAAA,KAAK,EAAE,MAFA;AAGPE,MAAAA,QAAQ,EAAE,UAHH;AAIPG,MAAAA,SAAS,EAAE,QAJJ;AAKPC,MAAAA,MAAM,EAAE,OALD;AAMPC,MAAAA,QAAQ,EAAE,KANH;AAOPC,MAAAA,SAAS,EAAE;AAPJ,KADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAYgBnE,WAAW,GAAG,GAZ9B,MAZD,eA4BC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,KAAD;AACG,IAAA,KAAK,EAAE;AAAEuD,MAAAA,UAAU,EAAEzD,QAAQ,GAAG,SAAH,GAAe,QAArC;AACL4D,MAAAA,MAAM,EAAE,MADH;AAELC,MAAAA,KAAK,EAAE,MAFF;AAGLrF,MAAAA,UAAU,EAAE,MAHP;AAILuF,MAAAA,QAAQ,EAAE,UAJL;AAKLC,MAAAA,IAAI,EAAE,CALD;AAMLC,MAAAA,GAAG,EAAE,CANA;AAOLK,MAAAA,QAAQ,EAAE;AAPL,KADV;AAWG,IAAA,YAAY,EAAE3E,YAXjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CA5BD,CAFA;AAgDC;;AAIH,eAAeN,GAAf","sourcesContent":["import React, {useState, useEffect } from \"react\";\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport background from \"./background.png\";\nimport axios from \"axios\";\nimport { Connection, clusterApiUrl, ConnectionConfig} from \"@solana/web3.js\";\nimport { getParsedNftAccountsByOwner, isValidSolanaAddress, createConnectionConfig} from \"@nfteyez/sol-rayz\";\nimport './App.css';\n\nvar publicKey;\nvar allNftData;\n\nconst express = require('express');\nconst request = require('request');\n\nApp.use((req, res, next) => {\n  res.header('Access-Control-Allow-Origin', '*');\n  next();\n});\n\n// headers.append(\"Access-Control-Allow-Origin\",\"*\");\n\nconst unityContext = new UnityContext({\n  loaderUrl: \"./Build/public.loader.js\",\n  dataUrl: \"./Build/public.data\",\n  frameworkUrl: \"./Build/public.framework.js\",\n  codeUrl: \"./Build/public.wasm\"\n});\n\nfunction App() {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [progression, setProgression] = useState(0);\n  const [provider, setProvider] = useState(\"\");\n\n\n  const getProvider = async () => {\n    if (\"solana\" in window) {\n      await window.solana.connect();\n      const provider = window.solana;\n      if (provider.isPhantom) {\n        return provider;\n      }\n    } else {\n      window.alert('Install https://www.phantom.app/');\n    }\n  };\n\n  async function letsgo() {\n     createConnection();\n     getProvider();\n       async function data() {\n         let res = await getAllNftData();\n         getNftTokenData();\n       }\n       data();\n  }\n\n  //create a connection\nconst createConnection = () => {\n  // return new Connection(clusterApiUrl(\"devnet\"));\n  return new Connection(\"https://www.whateverorigin.org/get?url=\" + clusterApiUrl(\"mainnet-beta\"))\n};\n\n  //get NFT\n  const getAllNftData = async () => {\n    try {\n      const connect =  createConnectionConfig(\"https://www.whateverorigin.org/get?url=\" + clusterApiUrl(\"mainnet-beta\"));\n      // const connect =  createConnectionConfig(clusterApiUrl(\"devnet\"));\n      const provider = getProvider();\n      let ownerToken = publicKey;\n      const result = isValidSolanaAddress(ownerToken);\n      const nfts = await getParsedNftAccountsByOwner({\n        publicAddress: ownerToken,\n        connection: connect,\n        serialization: true,\n      });\n      return nfts;\n  } catch (error) {\n    console.log(\"fail to make connection2\");\n    console.log(error);\n  }\n};\n\n//Function to get all nft data\nconst getNftTokenData = async () => {\n  try {\n    var root = {\n      data:{\n        arr:[]\n      } \n    };\n    let nftData = await getAllNftData();\n    var data = Object.keys(nftData).map((key) => nftData[key]);                                                                    \n    let n = data.length;\n    for (let i = 0; i < n; i++) {\n      let val = await axios.get(\"https://www.whateverorigin.org/get?url=\" + data[i].data.uri, function (req, res) {\n        var res = {\n          \"statusCode\": 200,\n          \"headers\": {\n              \"Access-Control-Allow-Origin\":\"*\"\n          },\n          \"body\": (JSON.stringify(val.data)),\n          \"isBase64Encoded\": false\n      };\n      }\n      );\n      console.log(\"fail to make connection3\");\n      root.data.arr.push(val);\n    }\n\n    allNftData = root.data;\n    // console.log(JSON.stringify(allNftData));\n    unityContext.send(\"SolanaWalletConnect\", \"SetNFTData\", JSON.stringify(allNftData));\n    // console.log(allNftData);\n    return root.data.arr;\n  } catch (error) {\n    console.log(error);\n    console.log(\"fail to make connection4\");\n  }\n};\n\nconst NFT = async (props) => {\n  const [nftData, setNftData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  createConnection();\n  getProvider();\nuseEffect(() => {\n    async function data() {\n      let res = await getAllNftData();\n      setNftData(res);\n      setLoading(true);\n      getNftTokenData();\n    }\n    data();\n  }, []);\n}\n  \n  useEffect( () => {\n   setProvider(publicKey);\n  }, []);\n  useEffect( () => {\n    setProvider(publicKey);\n   }, []);\n\n   useEffect(function () {    \n    unityContext.on(\"NFT\", function () {\n      if (window.solana.isConnected) {\n        // console.log(JSON.stringify(allNftData));\n\n        unityContext.send(\"SolanaWalletConnect\", \"SetNFTData\", JSON.stringify(allNftData));\n      } else {\n        getProvider().then(provider => {\n          // console.log('key', provider.publicKey.toString());\n          publicKey = provider.publicKey.toString();\n          setProvider(provider.publicKey.toString());\n        }).then(() => {\n          letsgo();\n        }).catch(function(error){\n          console.log(error)\n          console.log(\"fail to make connection5\");\n        });\n      }\n    });\n  }, []);\n\n  useEffect(function () {    \n    unityContext.on(\"Logout\", function () {\n      if (window.solana.isConnected) {\n        window.solana.disconnect();\n        window.solana.on('disconnect', () => console.log(\"disconnected!\"))\n        unityContext.send(\"SolanaWalletConnect\", \"Disconnected\");\n      }\n    });\n  }, []);\n\n  useEffect(function () {\n    unityContext.on(\"progress\", function (progression) {\n      console.log(\"progress\");\n      setProgression(parseFloat(progression).toFixed(2));\n    });\n  }, []);\n\n\n  useEffect(function () {\n    unityContext.on(\"loaded\", function () {\n      console.log(\"loaded\");\n      setIsLoaded(true);\n    });\n  }, []);\n\nvar some = \"0\";\n  return (\n\n  <div style = {{\n    visibility: isLoaded ? \"hidden\" : \"visible\",\n    backgroundImage: `url(${background})`,\n      backgroundSize: \"cover\",\n      height: \"100%\",\n      width: \"100%\",\n      color: \"#f5f5f5\",\n    position: 'absolute',\n    left: 0,\n    top: 0,\n  }}>\n\n   <p\n    style={{ visibility: isLoaded ? \"hidden\" : \"visible\",\n    height: \"30px\",\n    width: \"100%\",\n    position: \"absolute\",\n    textAlign: 'center',\n    bottom: \"100px\",\n    fontSize: \"2em\",\n    fontColor: \"red\",\n\n    \n \n    }}>Loading... {progression * 100}%</p>\n\n    \n   \n   <div>\n   <Unity\n      style={{ visibility: isLoaded ? \"visible\" : \"hidden\",\n        height: \"100%\",\n        width: \"100%\",\n        background: \"grey\",\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        overflow: \"hidden\",\n     \n    }}\n      unityContext={unityContext}\n    />\n    </div>\n    </div>\n  );\n\n  }\n\n  \n  \nexport default App"]},"metadata":{},"sourceType":"module"}